<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demo Video Page - ReviewResponder</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Google Sans', Roboto, Arial, sans-serif;
      background: #f8f9fa;
      min-height: 100vh;
    }

    /* ========== EXTENSION COMPATIBILITY ==========
       These classes match Google Maps selectors so the
       ReviewResponder extension can detect reviews!
       - .jftiEf = Review container (CRITICAL!)
       - .wiI7pd = Review text (CRITICAL!)
       ============================================ */
    .jftiEf {
      /* Google Maps review container */
    }
    .wiI7pd {
      /* Google Maps review text */
    }

    /* Google Maps Header */
    .gm-header {
      background: #fff;
      padding: 12px 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-bottom: 1px solid #e0e0e0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .gm-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 22px;
      font-weight: 500;
      color: #5f6368;
    }

    .gm-logo svg {
      width: 32px;
      height: 32px;
    }

    .gm-search {
      flex: 1;
      max-width: 600px;
      background: #f1f3f4;
      border-radius: 24px;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .gm-search input {
      border: none;
      background: transparent;
      font-size: 16px;
      width: 100%;
      outline: none;
    }

    /* Main Content */
    .container {
      max-width: 800px;
      margin: 24px auto;
      padding: 0 16px;
    }

    /* Business Card */
    .business-card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .business-header {
      display: flex;
      align-items: flex-start;
      gap: 16px;
    }

    .business-photo {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 36px;
      font-weight: bold;
    }

    .business-info h1 {
      font-size: 24px;
      font-weight: 500;
      color: #202124;
      margin-bottom: 8px;
    }

    .business-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .rating-number {
      font-size: 14px;
      font-weight: 500;
      color: #202124;
    }

    .stars {
      color: #fbbc04;
      font-size: 16px;
      letter-spacing: 2px;
    }

    .review-count {
      color: #5f6368;
      font-size: 14px;
    }

    .business-type {
      color: #5f6368;
      font-size: 14px;
    }

    /* Reviews Section */
    .reviews-section {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .reviews-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e0e0e0;
    }

    .reviews-header h2 {
      font-size: 18px;
      font-weight: 500;
      color: #202124;
    }

    /* Single Review - .jftiEf for Extension compatibility */
    .review {
      padding: 16px 0;
      border-bottom: 1px solid #f1f3f4;
    }

    .review:last-child {
      border-bottom: none;
    }

    .review-author {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .author-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ea4335;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      font-size: 18px;
    }

    .author-info {
      flex: 1;
    }

    .author-name {
      font-size: 14px;
      font-weight: 500;
      color: #202124;
    }

    .review-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 2px;
    }

    .review-stars {
      color: #fbbc04;
      font-size: 14px;
    }

    .review-date {
      color: #5f6368;
      font-size: 12px;
    }

    /* .wiI7pd for Extension compatibility */
    .review-text {
      font-size: 14px;
      line-height: 1.6;
      color: #202124;
      margin-bottom: 12px;
    }

    .review-actions {
      display: flex;
      gap: 16px;
    }

    .review-action {
      display: flex;
      align-items: center;
      gap: 6px;
      color: #5f6368;
      font-size: 13px;
      cursor: pointer;
      padding: 6px 12px;
      border-radius: 16px;
      transition: background 0.2s;
    }

    .review-action:hover {
      background: #f1f3f4;
    }

    .review-action.reply-btn {
      color: #1a73e8;
      font-weight: 500;
    }

    /* Reply Section */
    .reply-section {
      margin-top: 16px;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
      display: none;
    }

    .reply-section.active {
      display: block;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .reply-label {
      font-size: 13px;
      color: #5f6368;
      margin-bottom: 8px;
    }

    .reply-textarea {
      width: 100%;
      min-height: 100px;
      padding: 12px;
      border: 1px solid #dadce0;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      resize: vertical;
      outline: none;
      transition: border-color 0.2s;
    }

    .reply-textarea:focus {
      border-color: #1a73e8;
    }

    .reply-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 12px;
    }

    .btn {
      padding: 10px 24px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-cancel {
      background: transparent;
      border: none;
      color: #1a73e8;
    }

    .btn-cancel:hover {
      background: #e8f0fe;
    }

    .btn-submit {
      background: #1a73e8;
      border: none;
      color: white;
    }

    .btn-submit:hover {
      background: #1557b0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .btn-submit:disabled {
      background: #dadce0;
      cursor: not-allowed;
    }

    /* Success State */
    .success-message {
      display: none;
      padding: 16px;
      background: #e6f4ea;
      border-radius: 8px;
      margin-top: 16px;
      animation: fadeIn 0.3s ease;
    }

    .success-message.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .success-header {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #137333;
      font-weight: 500;
      margin-bottom: 12px;
    }

    .success-icon {
      font-size: 20px;
    }

    /* Owner Response */
    .owner-response {
      background: #fff;
      border-radius: 8px;
      padding: 12px;
      margin-top: 12px;
      border-left: 3px solid #1a73e8;
    }

    .owner-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .owner-badge {
      background: #1a73e8;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 500;
    }

    .owner-date {
      color: #5f6368;
      font-size: 12px;
    }

    .owner-text {
      font-size: 14px;
      line-height: 1.6;
      color: #202124;
    }

    /* Controls (hidden during recording) */
    .demo-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      gap: 8px;
      z-index: 1000;
      flex-wrap: wrap;
      max-width: 400px;
    }

    .demo-controls button {
      padding: 8px 16px;
      background: #202124;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
    }

    .demo-controls button:hover {
      background: #3c4043;
    }

    .demo-controls.hidden {
      display: none;
    }

    /* Timer Overlay */
    .timer-overlay {
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: rgba(0,0,0,0.8);
      color: #4ade80;
      padding: 12px 24px;
      border-radius: 8px;
      font-family: 'Roboto Mono', monospace;
      font-size: 24px;
      font-weight: bold;
      display: none;
      z-index: 1000;
    }

    .timer-overlay.active {
      display: block;
    }

    /* Extension Button Styling (injected by extension) */
    .rr-inline-respond-btn {
      margin-top: 8px !important;
    }
  </style>
</head>
<body>
  <!-- Google Maps Header -->
  <header class="gm-header">
    <div class="gm-logo">
      <svg viewBox="0 0 24 24" width="28" height="28" xmlns="http://www.w3.org/2000/svg">
        <path fill="#4285F4" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
        <circle fill="#fff" cx="12" cy="9" r="2.5"/>
      </svg>
      <span style="color:#5f6368;">Google Maps</span>
    </div>
    <div class="gm-search">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="#5f6368">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input type="text" id="search-input" value="hotels near me" readonly>
    </div>
  </header>

  <!-- Main Content -->
  <div class="container">
    <!-- Business Card -->
    <div class="business-card">
      <div class="business-header">
        <div class="business-photo" id="business-initials">GH</div>
        <div class="business-info">
          <h1 id="business-name">Grand Haven Hotel</h1>
          <div class="business-rating">
            <span class="rating-number" id="rating-number">3.4</span>
            <span class="stars" id="stars">&#9733;&#9733;&#9733;&#9734;&#9734;</span>
            <span class="review-count" id="review-count">(847 reviews)</span>
          </div>
          <div class="business-type" id="business-type">Hotel in Downtown</div>
        </div>
      </div>
    </div>

    <!-- Reviews Section -->
    <div class="reviews-section">
      <div class="reviews-header">
        <h2>Reviews</h2>
      </div>

      <!-- MAIN REVIEW - Extension Compatible -->
      <!-- .jftiEf = Extension detects this as review container -->
      <div class="review jftiEf" id="main-review">
        <div class="review-author">
          <div class="author-avatar" id="main-avatar">J</div>
          <div class="author-info">
            <div class="author-name" id="main-author">John Davidson</div>
            <div class="review-meta">
              <span class="review-stars" id="main-stars">&#9733;&#9734;&#9734;&#9734;&#9734;</span>
              <span class="review-date">2 weeks ago</span>
            </div>
          </div>
        </div>
        <!-- .wiI7pd = Extension extracts review text from this -->
        <div class="review-text wiI7pd" id="review-text">
          NEVER staying here again! Checked in at 3pm but room wasn't ready until 6pm. When I finally got in, there were stains on the sheets and hair in the bathroom. Asked the front desk for help and they just shrugged. $300/night for THIS?! Save your money and stay somewhere else. Absolutely disgusted.
        </div>
        <div class="review-actions">
          <div class="review-action">
            <span>&#128077;</span> Helpful
          </div>
          <div class="review-action reply-btn" id="reply-btn">
            <span>&#8617;</span> Reply
          </div>
          <div class="review-action">
            <span>&#8942;</span>
          </div>
        </div>

        <!-- Reply Section -->
        <div class="reply-section" id="reply-section">
          <div class="reply-label">Response as owner</div>
          <textarea
            class="reply-textarea"
            id="reply-textarea"
            aria-label="Write a reply to this review"
            placeholder="Write your reply..."
          ></textarea>
          <div class="reply-actions">
            <button class="btn btn-cancel" id="cancel-btn">Cancel</button>
            <button class="btn btn-submit" id="submit-btn" aria-label="Post reply">Post reply</button>
          </div>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="success-message">
          <div class="success-header">
            <span class="success-icon">&#10004;</span>
            Your reply was posted
          </div>
          <div class="owner-response">
            <div class="owner-header">
              <span class="owner-badge">Owner</span>
              <span class="owner-date">Just now</span>
            </div>
            <div class="owner-text" id="owner-response-text"></div>
          </div>
        </div>
      </div>

      <!-- Review 2 - 4 stars, positive -->
      <div class="review jftiEf">
        <div class="review-author">
          <div class="author-avatar" style="background: #34a853;">S</div>
          <div class="author-info">
            <div class="author-name">Sarah M.</div>
            <div class="review-meta">
              <span class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9734;</span>
              <span class="review-date">1 month ago</span>
            </div>
          </div>
        </div>
        <div class="review-text wiI7pd">
          Great location, walking distance to Hollywood attractions. Room was clean and modern. Only downside was the noise from the street at night.
        </div>
        <div class="review-actions">
          <div class="review-action">
            <span>&#128077;</span> Helpful (3)
          </div>
          <div class="review-action reply-btn">
            <span>&#8617;</span> Reply
          </div>
        </div>
      </div>

      <!-- Review 3 - 2 stars, critical -->
      <div class="review jftiEf">
        <div class="review-author">
          <div class="author-avatar" style="background: #ea4335;">M</div>
          <div class="author-info">
            <div class="author-name">Mike Thompson</div>
            <div class="review-meta">
              <span class="review-stars">&#9733;&#9733;&#9734;&#9734;&#9734;</span>
              <span class="review-date">3 weeks ago</span>
            </div>
          </div>
        </div>
        <div class="review-text wiI7pd">
          The room was outdated and the AC barely worked. Staff was friendly but couldn't fix the issues. For the price, I expected much better. Wouldn't recommend unless they renovate.
        </div>
        <div class="review-actions">
          <div class="review-action">
            <span>&#128077;</span> Helpful (7)
          </div>
          <div class="review-action reply-btn">
            <span>&#8617;</span> Reply
          </div>
        </div>
      </div>

      <!-- Review 4 - 5 stars, excellent -->
      <div class="review jftiEf">
        <div class="review-author">
          <div class="author-avatar" style="background: #fbbc04;">E</div>
          <div class="author-info">
            <div class="author-name">Emma Rodriguez</div>
            <div class="review-meta">
              <span class="review-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
              <span class="review-date">2 months ago</span>
            </div>
          </div>
        </div>
        <div class="review-text wiI7pd">
          Absolutely wonderful experience! The staff went above and beyond to make our anniversary special. The room was spotless, the view was amazing, and the breakfast buffet was incredible. Will definitely be back!
        </div>
        <div class="review-actions">
          <div class="review-action">
            <span>&#128077;</span> Helpful (12)
          </div>
          <div class="review-action reply-btn">
            <span>&#8617;</span> Reply
          </div>
        </div>
      </div>

      <!-- Review 5 - German, 3 stars -->
      <div class="review jftiEf">
        <div class="review-author">
          <div class="author-avatar" style="background: #4285f4;">T</div>
          <div class="author-info">
            <div class="author-name">Thomas Mueller</div>
            <div class="review-meta">
              <span class="review-stars">&#9733;&#9733;&#9733;&#9734;&#9734;</span>
              <span class="review-date">1 month ago</span>
            </div>
          </div>
        </div>
        <div class="review-text wiI7pd">
          Das Hotel ist okay, aber nicht mehr. Das Frühstück war enttäuschend und das WLAN funktionierte nicht richtig. Die Lage ist super, aber für den Preis hätte ich mehr erwartet.
        </div>
        <div class="review-actions">
          <div class="review-action">
            <span>&#128077;</span> Helpful (2)
          </div>
          <div class="review-action reply-btn">
            <span>&#8617;</span> Reply
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo Controls -->
  <div class="demo-controls" id="demo-controls">
    <button onclick="resetDemo()">Reset</button>
    <button onclick="toggleTimer()">Timer</button>
    <button onclick="switchBusiness('hotel')">Hotel</button>
    <button onclick="switchBusiness('restaurant')">Restaurant</button>
    <button onclick="switchBusiness('dentist')">Dentist</button>
    <button onclick="hideControls()">Hide All</button>
  </div>

  <!-- Timer Overlay -->
  <div class="timer-overlay" id="timer-overlay">00:00</div>

  <script>
    // Elements
    const replyBtn = document.getElementById('reply-btn');
    const replySection = document.getElementById('reply-section');
    const replyTextarea = document.getElementById('reply-textarea');
    const cancelBtn = document.getElementById('cancel-btn');
    const submitBtn = document.getElementById('submit-btn');
    const successMessage = document.getElementById('success-message');
    const ownerResponseText = document.getElementById('owner-response-text');
    const timerOverlay = document.getElementById('timer-overlay');
    const demoControls = document.getElementById('demo-controls');

    // Timer variables
    let timerInterval = null;
    let timerSeconds = 0;
    let timerActive = false;

    // Business presets
    const businessPresets = {
      hotel: {
        name: 'Grand Haven Hotel',
        type: 'Hotel in Downtown',
        initials: 'GH',
        rating: '3.4',
        stars: '&#9733;&#9733;&#9733;&#9734;&#9734;',
        reviews: '847',
        search: 'hotels near me',
        mainReview: `NEVER staying here again! Checked in at 3pm but room wasn't ready until 6pm. When I finally got in, there were stains on the sheets and hair in the bathroom. Asked the front desk for help and they just shrugged. $300/night for THIS?! Save your money and stay somewhere else. Absolutely disgusted.`,
        reviewer: 'John Davidson',
        reviewerStars: '&#9733;&#9734;&#9734;&#9734;&#9734;'
      },
      restaurant: {
        name: "Mario's Italian Kitchen",
        type: 'Italian Restaurant',
        initials: 'MI',
        rating: '4.2',
        stars: '&#9733;&#9733;&#9733;&#9733;&#9734;',
        reviews: '324',
        search: 'italian restaurants',
        mainReview: `Food was cold when it arrived and the waiter was incredibly rude. I asked for more bread and he rolled his eyes at me. The pasta was overcooked and the sauce tasted like it came from a jar. For $50 per person, this is unacceptable. The only reason I'm giving 2 stars is because the tiramisu was decent.`,
        reviewer: 'Lisa Chen',
        reviewerStars: '&#9733;&#9733;&#9734;&#9734;&#9734;'
      },
      dentist: {
        name: 'Bright Smile Dental',
        type: 'Dental Clinic',
        initials: 'BS',
        rating: '3.8',
        stars: '&#9733;&#9733;&#9733;&#9733;&#9734;',
        reviews: '156',
        search: 'dentist near me',
        mainReview: `Had to wait 45 minutes past my appointment time. When I finally saw the dentist, he seemed rushed and didn't explain anything. The cleaning was quick but felt incomplete. Staff was nice but the overall experience was disappointing. I expected better from a clinic that charges premium prices.`,
        reviewer: 'Robert James',
        reviewerStars: '&#9733;&#9733;&#9734;&#9734;&#9734;'
      }
    };

    // Open Reply Section
    replyBtn.addEventListener('click', () => {
      replySection.classList.add('active');
      replyTextarea.focus();
      if (!timerActive && timerOverlay.classList.contains('active')) {
        startTimer();
      }
    });

    // Cancel Reply
    cancelBtn.addEventListener('click', () => {
      replySection.classList.remove('active');
      replyTextarea.value = '';
    });

    // Submit Reply
    submitBtn.addEventListener('click', () => {
      const responseText = replyTextarea.value.trim();
      if (responseText) {
        replySection.classList.remove('active');
        ownerResponseText.textContent = responseText;
        successMessage.classList.add('active');
        if (timerActive) stopTimer();
      }
    });

    // Ctrl+Enter to submit
    replyTextarea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && e.ctrlKey) submitBtn.click();
    });

    // Enable/disable submit button
    replyTextarea.addEventListener('input', () => {
      submitBtn.disabled = !replyTextarea.value.trim();
    });

    // Timer functions
    function startTimer() {
      timerActive = true;
      timerSeconds = 0;
      timerInterval = setInterval(() => {
        timerSeconds++;
        const mins = Math.floor(timerSeconds / 60).toString().padStart(2, '0');
        const secs = (timerSeconds % 60).toString().padStart(2, '0');
        timerOverlay.textContent = `${mins}:${secs}`;
      }, 1000);
    }

    function stopTimer() {
      timerActive = false;
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    }

    function toggleTimer() {
      timerOverlay.classList.toggle('active');
      if (!timerOverlay.classList.contains('active')) {
        stopTimer();
        timerSeconds = 0;
        timerOverlay.textContent = '00:00';
      }
    }

    // Reset Demo
    function resetDemo() {
      replySection.classList.remove('active');
      successMessage.classList.remove('active');
      replyTextarea.value = '';
      ownerResponseText.textContent = '';
      stopTimer();
      timerSeconds = 0;
      timerOverlay.textContent = '00:00';
    }

    // Hide Controls
    function hideControls() {
      demoControls.classList.add('hidden');
    }

    // Switch Business Type
    function switchBusiness(type) {
      const preset = businessPresets[type];
      if (!preset) return;

      document.getElementById('business-name').textContent = preset.name;
      document.getElementById('business-type').textContent = preset.type;
      document.getElementById('business-initials').textContent = preset.initials;
      document.getElementById('rating-number').textContent = preset.rating;
      document.getElementById('stars').innerHTML = preset.stars;
      document.getElementById('review-count').textContent = `(${preset.reviews} reviews)`;
      document.getElementById('search-input').value = preset.search;
      document.getElementById('review-text').textContent = preset.mainReview;
      document.getElementById('main-author').textContent = preset.reviewer;
      document.getElementById('main-avatar').textContent = preset.reviewer.charAt(0);
      document.getElementById('main-stars').innerHTML = preset.reviewerStars;

      resetDemo();
      console.log(`[Demo] Switched to: ${preset.name}`);
    }

    // URL Parameters
    const urlParams = new URLSearchParams(window.location.search);

    if (urlParams.get('hideControls') === 'true') hideControls();
    if (urlParams.get('showTimer') === 'true') timerOverlay.classList.add('active');

    const businessName = urlParams.get('business');
    if (businessName) document.getElementById('business-name').textContent = decodeURIComponent(businessName);

    const reviewText = urlParams.get('review');
    if (reviewText) document.getElementById('review-text').textContent = decodeURIComponent(reviewText);

    const businessType = urlParams.get('type');
    if (businessType && businessPresets[businessType]) switchBusiness(businessType);

    // Extension Compatibility Log
    console.log('%c[ReviewResponder Demo Page]', 'color: #667eea; font-weight: bold; font-size: 14px;');
    console.log('Extension Compatibility:');
    console.log('  ✅ .jftiEf containers:', document.querySelectorAll('.jftiEf').length);
    console.log('  ✅ .wiI7pd text elements:', document.querySelectorAll('.wiI7pd').length);
    console.log('  ✅ Reply textarea: aria-label="Write a reply to this review"');
    console.log('URL Params: ?hideControls=true | ?showTimer=true | ?type=hotel|restaurant|dentist');
  </script>
</body>
</html>
